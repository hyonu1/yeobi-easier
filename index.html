<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>yeobi_easy for KOR</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        :root { --color-teal: #00BFA5; --font-pretendard: 'Pretendard', sans-serif; }
        body { font-family: var(--font-pretendard); background-color: #FFFFFF; color: #191F28; -webkit-font-smoothing: antialiased; }
        
        @keyframes pulse-attention { 0%, 100% { transform: scale(1); box-shadow: 0 4px 12px rgba(0, 191, 165, 0.2); } 50% { transform: scale(1.03); box-shadow: 0 0 0 4px rgba(0, 191, 165, 0.15); } }
        .animate-pulse-attention { animation: pulse-attention 2.5s infinite cubic-bezier(0.4, 0, 0.2, 1); }
        .result-card { background-color: #F7F9FB; border-radius: 20px; transition: all 0.4s ease; }
        
        .perspective-1000 { perspective: 1000px; }
        .flip-card-inner { transition: transform 0.6s; transform-style: preserve-3d; position: relative; }
        .is-flipped { transform: rotateY(180deg); }
        .flip-card-front, .flip-card-back { backface-visibility: hidden; position: absolute; width: 100%; top: 0; left: 0; }
        .flip-card-back { transform: rotateY(180deg); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // 2026년 전남 교육행정 여비 규정 데이터
        const CONFIG = {
            OUT_DAILY: 25000,   // 관외 일비
            OUT_MEAL: 25000,    // 관외 식비
            IN_DAILY_LONG: 20000, // 관내 (4시간 이상)
            IN_DAILY_SHORT: 10000, // 관내 (4시간 미만)
            BUS_RATE: 168.6,
            BASE_FARE: 1800
        };

        const App = () => {
            const [origin, setOrigin] = useState('');
            const [destination, setDestination] = useState('');
            const [travelType, setTravelType] = useState('OUT'); // 'IN' 또는 'OUT'
            const [distance, setDistance] = useState(0);
            const [isFlipped, setIsFlipped] = useState(false);
            
            const [deductions, setDeductions] = useState({
                gov_vehicle: false,
                short_time: false, // 관내 4시간 미만용
                meal_count: 0
            });

            const calculate = () => {
                let daily = 0;
                let meal = 0;

                if (travelType === 'OUT') {
                    daily = CONFIG.OUT_DAILY;
                    if (deductions.gov_vehicle) daily = daily / 2; // 관외 관용차 50% 감액
                    meal = CONFIG.OUT_MEAL - (deductions.meal_count * (CONFIG.OUT_MEAL / 3));
                } else {
                    daily = deductions.short_time ? CONFIG.IN_DAILY_SHORT : CONFIG.IN_DAILY_LONG;
                    if (deductions.gov_vehicle) daily = daily - 10000; // 관내 관용차 1만원 감액
                    meal = 0;
                }

                // 거리 기반 교통비 (km당 요율 계산)
                const transport = Math.round((CONFIG.BASE_FARE + (distance > 10 ? (distance - 10) * CONFIG.BUS_RATE : 0)) / 100) * 100;

                return { daily, meal, transport: transport * 2, total: daily + meal + (transport * 2) };
            };

            const costs = calculate();

            return (
                <div className="max-w-[480px] mx-auto p-5 min-h-screen">
                    <header className="text-center mb-8">
                        <h1 className="text-2xl font-bold text-gray-900">yeobi_easy for KOR</h1>
                        <p className="text-[10px] font-bold text-teal-500 mt-1">2026 전라남도교육청 여비 규정 준수</p>
                    </header>

                    <div className="space-y-4 mb-6">
                        <div className="bg-gray-50 p-4 rounded-2xl">
                            <label className="block text-[10px] font-bold text-gray-400 mb-1">출발지 (시/군/구/읍/동)</label>
                            <input type="text" className="w-full bg-transparent outline-none font-bold text-lg" placeholder="예: 함평군, 동작구" value={origin} onChange={e => setOrigin(e.target.value)} />
                        </div>
                        <div className="bg-gray-50 p-4 rounded-2xl">
                            <label className="block text-[10px] font-bold text-gray-400 mb-1">목적지 (시/군/구/읍/동)</label>
                            <input type="text" className="w-full bg-transparent outline-none font-bold text-lg" placeholder="예: 문내면, 세종시" value={destination} onChange={e => setDestination(e.target.value)} />
                        </div>
                        <div className="flex gap-2">
                            <button onClick={() => setTravelType('IN')} className={`flex-1 p-3 rounded-xl font-bold text-sm ${travelType === 'IN' ? 'bg-teal-500 text-white' : 'bg-gray-100 text-gray-400'}`}>관내 출장</button>
                            <button onClick={() => setTravelType('OUT')} className={`flex-1 p-3 rounded-xl font-bold text-sm ${travelType === 'OUT' ? 'bg-teal-500 text-white' : 'bg-gray-100 text-gray-400'}`}>관외 출장</button>
                        </div>
                        <div className="bg-gray-50 p-4 rounded-2xl">
                            <label className="block text-[10px] font-bold text-gray-400 mb-1">편도 거리 (km) - 교통비 산출용</label>
                            <input type="number" className="w-full bg-transparent outline-none font-bold text-lg" value={distance} onChange={e => setDistance(parseFloat(e.target.value) || 0)} />
                        </div>
                    </div>

                    <div className="perspective-1000 h-[380px] mb-6">
                        <div className={`flip-card-inner h-full ${isFlipped ? 'is-flipped' : ''}`}>
                            {/* FRONT: 요약 내역 */}
                            <div className="flip-card-front h-full result-card p-8 flex flex-col justify-between border border-gray-100 shadow-xl">
                                <div className="text-center">
                                    <span className="text-[10px] font-bold text-teal-600 bg-teal-50 px-2 py-1 rounded-full">{travelType === 'IN' ? '관내' : '관외'} 여비 요약</span>
                                    <h2 className="text-4xl font-black text-gray-900 mt-6">{costs.total.toLocaleString()}<span className="text-lg font-medium ml-1">원</span></h2>
                                    <p className="text-xs text-gray-400 mt-2">{origin || '미정'} ↔ {destination || '미정'}</p>
                                </div>
                                <button onClick={() => setIsFlipped(true)} className="w-full py-4 bg-teal-500 text-white rounded-2xl font-bold animate-pulse-attention">감액 설정 및 상세 보기</button>
                            </div>

                            {/* BACK: 감액 설정 및 상세 내역 */}
                            <div className="flip-card-back h-full result-card p-6 border-2 border-teal-500/20 shadow-2xl overflow-y-auto">
                                <div className="flex justify-between items-center mb-4">
                                    <h3 className="font-bold text-gray-900 text-sm">감사 대비 상세 설정</h3>
                                    <button onClick={() => setIsFlipped(false)} className="text-xs font-bold text-gray-400">닫기</button>
                                </div>
                                
                                <div className="space-y-3 mb-6">
                                    <button onClick={() => setDeductions(p => ({...p, gov_vehicle: !p.gov_vehicle}))} className={`w-full p-3 rounded-xl text-left text-xs font-bold transition-all ${deductions.gov_vehicle ? 'bg-teal-500 text-white' : 'bg-white border border-gray-100 text-gray-600'}`}>관용차량 이용 (일비 감액)</button>
                                    {travelType === 'IN' ? (
                                        <button onClick={() => setDeductions(p => ({...p, short_time: !p.short_time}))} className={`w-full p-3 rounded-xl text-left text-xs font-bold transition-all ${deductions.short_time ? 'bg-teal-500 text-white' : 'bg-white border border-gray-100 text-gray-600'}`}>4시간 미만 출장</button>
                                    ) : (
                                        <div className="flex items-center justify-between p-3 bg-white rounded-xl border border-gray-100">
                                            <span className="text-xs font-bold text-gray-600">식사 제공 감액</span>
                                            <select className="text-xs font-bold outline-none" value={deductions.meal_count} onChange={e => setDeductions(p => ({...p, meal_count: parseInt(e.target.value)}))}>
                                                <option value="0">0식</option><option value="1">1식</option><option value="2">2식</option><option value="3">3식</option>
                                            </select>
                                        </div>
                                    )}
                                </div>

                                <div className="pt-4 border-t border-dashed border-gray-200 text-xs space-y-2">
                                    <div className="flex justify-between"><span>일비</span><span>{costs.daily.toLocaleString()}원</span></div>
                                    <div className="flex justify-between"><span>식비</span><span>{costs.meal.toLocaleString()}원</span></div>
                                    <div className="flex justify-between"><span>왕복 교통비</span><span>{costs.transport.toLocaleString()}원</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
